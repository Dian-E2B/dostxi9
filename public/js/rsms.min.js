jQuery(document).ready((function (e) { var a; e((function () { e("#datepicker").datepicker({ dateFormat: "MM d, yy", showOtherMonths: !0, selectOtherMonths: !0 }) })), e("#getSelectedRows").hide(), a = 1 == semesterValue ? semesterValue + 1 : 2 == semesterValue ? semesterValue - 1 : "SUMMER"; var t = this1URL, l = e("#yourDataTable").DataTable({ orderCellsTop: !0, select: !0, serverSide: !0, pageLength: 100, ajax: { url: t, type: "GET", data: { startyear: startyearValue, endyear: endyearValue, semester: semesterValue } }, columns: [{ data: null, orderable: !1, searchable: !1, className: "action-column", render: function (e, a, t) { var l = t.NUMBER; return '<td class=""><a href="#" class="edit-btn" data-number="' + l + '"><i class="bi bi-pencil-fill"></i><a href="#" class="view-btn" data-number="' + l + '"><i class="bi bi-eye-fill"></i></a></td>' } }, { className: "action-column", data: "BATCH" }, { className: "action-column", data: "NUMBER" }, { data: "NAME" }, { className: "MF-column", data: "MF", render: function (e, a, t) { return '<span style="width: 3% !important">' + e + "</span>" } }, { className: "action-column", data: "SCHOLARSHIPPROGRAM", render: function (e, a, t) { return '<span style="text-align:center !important">' + e + "</span>" } }, { className: "action-column", data: "SCHOOL", render: function (e, a, t) { return "<span >" + e + "</span>" } }, { className: "action-column", data: "COURSE", render: function (e, a, t) { return '<td class="" style="color: blue;">' + ("<span>" + e + "</span>") + "</td>" } }, { className: "action-column", data: "GRADES", name: "GRADES" + a + "SEM" + startyearValue - 1 + endyearValue - 1 }, { className: "action-column", data: "SummerREG" }, { className: "action-column", data: "REGFORMS" }, { className: "action-column", data: "REMARKS" }, { data: "STATUSENDORSEMENT" }, { data: "STATUSENDORSEMENT2" }, { data: "STATUS", render: function (e, a, t) { return null === e ? "" : "<span>" + e + "</span>" } }, { data: "NOTATIONS" }, { data: "SUMMER" }, { data: "FARELEASEDTUITION" }, { data: "FARELEASEDTUITIONBOOKSTIPEND" }, { data: "LVDCAccount" }, { data: "HVCNotes" }, { data: "startyear" }, { data: "endyear" }], columnDefs: [{ targets: "action-column", className: "text-center" }, { targets: "MF-column", orderable: !1, searchable: !1 }, { targets: [0, 2], orderable: !1, searchable: !1 }, { targets: [1, 2, 3, 5, 6, 7, 8, 9, 19, 4, 10, 11, 12, 13, 14, 15, 16, 17, 18, 20], orderable: !1 }], scrollX: !0, order: [], fixedColumns: { leftColumns: 1 }, createdRow: function (a, t, l) { e(a).find(".action-column").addClass("text-center") }, drawCallback: function (a) { var t = this.api(); t.columns([4, 5, 6, 7]).every((function (a) { var l = this, d = e(t.column(a).header()).text(), o = l.header().querySelector("select"); o && 0 !== o.options.length || ((o = document.createElement("select")).style.padding = "2px", o.add(new Option(" " + d, "")), l.header().replaceChildren(o), o.addEventListener("change", (function () { var e = DataTable.util.escapeRegex(o.value); l.search(e ? "^" + e + "$" : "", !0, !1).draw() })), l.data().unique().sort().each((function (e, a) { e !== d && o.add(new Option(e)) }))) })) } }); e("#nav-Ongoing-tab").click((function () { l.columns.adjust().draw() })); var d = !1; e("#selectAllRows").on("click", (function () { (d = !d) ? l.rows().select() : l.rows().deselect() })), e("#getSelectedRows2").on("click", (function () { var a = l.rows({ selected: !0 }).data().toArray().map((e => e.NUMBER)), t = e("#startyear").val(), d = e("#semester").val(), o = e("#datepicker").val(); axios.post("/endorseongoing", { selectedRowIds: a, startYear: t, semester: d, datepicker: o }).then((function (e) { Swal.fire({ title: "Endorsed!", text: "Scholar(s) has ben endorsed!", icon: "success", confirmButtonText: "Okay" }), l.ajax.reload(null, !1), l.columns.adjust().draw() })).catch((function (e) { })) })), l.on("select deselect", (function () { l.rows({ selected: !0 }).count() > 0 ? e("#getSelectedRows").show() : e("#getSelectedRows").hide() })), e(document).on("click", ".view-btn", (function () { var a = e(this).data("number"), t = "{{ url(" / viewscholarrecords / ") }}" + "/" + a; window.location.href = t })), e(document).on("click", ".edit-btn", (function () { var a = e(this).data("number"); axios.get(`/get-ongoing/${a}/${semesterValue}/${startyearValue}`).then((e => { const a = e.data; document.querySelector("#editModal #idField").value = a.NUMBER, document.querySelector("#editModal #nameField").value = a.NAME, document.querySelector("#editModal #genderField").value = a.MF, document.querySelector("#editModal #programField").value = a.SCHOLARSHIPPROGRAM, document.querySelector("#editModal #schoolField").value = a.SCHOOL, document.querySelector("#editModal #courseField").value = a.COURSE, document.querySelector("#editModal #gradesField").value = a.GRADES, document.querySelector("#editModal #summerRegField").value = a.SummerREG, document.querySelector("#editModal #regFormsField").value = a.REGFORMS, document.querySelector("#editModal #remarksField").value = a.REMARKS, document.querySelector("#editModal #statusEndorsementField").value = a.STATUSENDORSEMENT, document.querySelector("#editModal #statusEndorsement2Field").value = a.STATUSENDORSEMENT2, document.querySelector("#editModal #statusField").value = a.STATUS, document.querySelector("#editModal #notationsField").value = a.NOTATIONS, document.querySelector("#editModal #summerField").value = a.SUMMER, document.querySelector("#editModal #faReleaseTuitionField").value = a.FARELEASEDTUITION, document.querySelector("#editModal #faReleaseTuitionBookStipendField").value = a.FARELEASEDTUITIONBOOKSTIPEND, document.querySelector("#editModal #lvdCAccountField").value = a.LVDCAccount, document.querySelector("#editModal #hvcNotesField").value = a.HVCNotes, document.querySelector("#editModal #startyearField").value = a.startyear, document.querySelector("#editModal #endyearField").value = a.endyear, document.querySelector("#editModal #semesterField").value = a.semester; const t = document.getElementById("editModal"); (bootstrap.Offcanvas.getInstance(t) || new bootstrap.Offcanvas(t)).show() })).catch((e => { })), e("#saveChangesBtn").off("click").click((function () { var t = { NAME: e("#editModal #nameField").val(), MF: e("#genderField").val(), SCHOLARSHIPPROGRAM: e("#editModal #programField").val(), SCHOOL: e("#editModal #schoolField").val(), COURSE: e("#editModal #courseField").val(), GRADES: e("#editModal #gradesField").val(), SummerREG: e("#editModal #summerRegField").val(), REGFORMS: e("#editModal #regFormsField").val(), STATUSENDORSEMENT: e("#editModal #statusEndorsementField").val(), STATUSENDORSEMENT2: e("#editModal #statusEndorsement2Field").val(), STATUS: e("#editModal #statusField").val(), NOTATIONS: e("#editModal #notationsField").val(), SUMMER: e("#editModal #summerField").val(), FARELEASEDTUITION: e("#editModal #faReleaseTuitionField").val(), FARELEASEDTUITIONBOOKSTIPEND: e("#editModal #faReleaseTuitionBookStipendField").val(), LVDCAccount: e("#editModal #lvdCAccountField").val(), HVCNotes: e("#editModal #lvdCAccountField").val(), HVCNotes: e("#editModal #lvdCAccountField").val(), REMARKS: e("#editModal #remarksField").val() }; axios.post(`/savechangesongongoing/${a}`, t, { headers: { "X-CSRF-TOKEN": document.querySelector('meta[name="csrf-token"]').getAttribute("content") } }).then((e => { Swal.fire({ icon: "success", text: "Record has been edited", title: "Success!" }), l.ajax.reload(null, !1), document.querySelectorAll("#editModal input").forEach((e => e.value = "")); let a = document.getElementById("editModal"); bootstrap.Offcanvas.getInstance(a).hide() })).catch((e => { })) })) }));[1, 2, 21, 22, 22].forEach((function (e) { l.column(e).visible(!1) })) }));
function customExportAction(e, t, a, o) { var n = t.settings()[0]._iDisplayStart; t.one("preXhr", (function (e, d, r) { r.start = 0, r.length = 2147483647, t.one("preDraw", (function (e, d) { return $.fn.dataTable.ext.buttons.print.action(e, t, a, o), t.one("preXhr", (function (e, t, a) { d._iDisplayStart = n, a.start = n })), setTimeout(t.ajax.reload, 0), !1 })) })), t.ajax.reload() } $.extend(!0, $.fn.dataTable.defaults, { dom: "flrtipB", buttons: [{ extend: "print", autoPrint: !0, orientation: "landscape", pageSize: "A4", text: '<i class="bi bi-printer-fill"></i>', title: "ON-GOING SCHOLARS MONITORING CHECKLIST " + semesterValue + " AY " + startyearValue + "-" + endyearValue, exportOptions: { columns: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 14, 15], modifier: { search: "none" } }, action: customExportAction, customize: function (e) { $(e.document.body).css({ "background-color": "#fff" }), $(e.document.body).find("table td").css({ "white-space": "normal", "word-wrap": "break-word" }), $(e.document.body).find("div.DTTT_container").remove(), $(e.document.body).find("table td:nth-child(3)").css({ "white-space": "nowrap", "word-wrap": "normal" }), $(e.document.body).find("table td:nth-child(6)").css({ "white-space": "nowrap", "word-wrap": "normal" }), $(e.document.body).find("h1").css("font-size", "50pt"), $(e.document.body).find("h1").css("font-weight", "bold"), -1 === e.document.body.innerHTML.indexOf('<img id="logo"') && $(e.document.body).prepend('<img id="logo"  src="' + imageURL + '">'), $(e.document.body).css("font-size", "36pt").find("td").css("font-size", "36pt").css("background-color", "white"), $(e.document.body).find("table td").css({ border: "1px solid black", border: "none !important" }), $(e.document.body).find("table th").css({ border: "none !important" }), $(e.document.body).find("table td, table th").css({ "padding-left": "0.5rem", "padding-right": "0.5rem" }), $(e.document.body).find("table thead th").each((function (e) { var t; switch (e) { case 0: t = "BATCH"; break; case 1: t = "No"; break; case 2: t = "NAME"; break; case 3: t = "M/F"; break; case 4: t = "SCHOLARSHIP\nPROGRAM"; break; case 5: t = "School"; break; case 6: t = "Course"; break; case 7: t = "Grades"; break; case 8: t = "Summer\nREG"; break; case 9: t = "REG\nFORMS"; break; case 10: t = "REMARKS"; break; case 11: t = "ENDORSEMENT"; break; case 12: t = "STATUS"; break; case 13: t = "NOTATION"; break; default: t = "Default Header" }$(this).text(t), $(this).css({ "font-size": "40pt", "white-space": "pre-wrap", border: "1px solid black" }) })), $(e.document.body).find("table tbody td:nth-child(2)").each((function (e) { $(this).text(e + 1) })), $(e.document.body).find("table").removeClass("table-striped"); var t = e.document.head || e.document.getElementsByTagName("head")[0], a = document.createElement("style"); a.type = "text/css", a.appendChild(document.createTextNode("table { width: 100%; } ")), t.appendChild(a) } }] });
